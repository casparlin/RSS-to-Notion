# RSS内容提取问题修复说明

## 问题描述

在使用RSS-to-Notion导入中国数字时代(cdtfeed.txt)的RSS源时，发现第一个条目的内容只保留了封面/标题/一句话摘要，完整的文章内容没有被导入。具体来说，只保留了类似以下的摘要：

> "如果在一个正常的国家，这些令人发指的囚禁本不应该存在。哪怕只有一起，也是对人类文明严重的亵渎。然而，很不幸，它就在那里频频发生。这架冰冷的钢铁囚笼，吞噬了不少善良和正直的人。现在，竟然轮到你了。"

而文章的其他完整内容都未能成功导入。

## 问题原因

经过深入分析，发现原因在于RSS解析代码中的内容提取逻辑存在缺陷：

1. RSS条目中通常包含两种内容字段：
   - `summary` - 通常包含文章的摘要或前几段内容
   - `content` - 通常包含文章的完整内容

2. 在`Util/FeedTool.py`的`parse_rss_entries`函数中，只使用了`entry.get("summary")`作为内容来源，而没有考虑使用可能包含完整内容的`content`字段。

3. 具体来说，对于中国数字时代的RSS源：
   - `summary`字段长度为460个字符，只包含了文章开头的摘要
   - `content`字段长度为9507个字符，包含了完整的文章内容
   - 提取的文本内容对比：从summary提取只有97个字符，从content提取有7477个字符

## 修复方案

修改`Util/FeedTool.py`中的`parse_rss_entries`函数，优化内容提取逻辑：

1. 采用优先级排序的方式获取RSS条目内容：
   - 首先尝试使用`content`字段
   - 如果没有content字段，尝试使用`content:encoded`字段 (WordPress常用)
   - 如果以上两者都没有，才使用`summary`字段

2. 将获取到的完整HTML内容用于：
   - 转换为Notion块 (`convert_html_to_notion_blocks`函数)
   - 计算内容类型 (`get_content_type`函数)
   - 存储到条目数据中

## 修复效果

1. 成功从RSS源中提取完整文章内容，而不仅仅是摘要
2. 保持与原有功能的兼容性，对于不同格式的RSS源都能正确处理
3. 改进了代码的健壮性，增加了错误处理

## 版本信息

这个修复已在版本4.0.1中实现，并将继续维护和优化。 